## 为什么要ES,本身你了解ES么？你还用一些其他的中间件么？
就是一种，搜索查询的工具吧。然后提供了强大的检索功能。
倒排索引，然后能获取到数据。

天然是分布式的，然后会获取到数据，然后组合。然后输出

## 项目的日志收集
https://www.jianshu.com/p/0a5acf831409

通过filebeat读取日志，传送到kafka队列里，kafka再传给logstash过滤切割日志，logstash传到es里，最后kibana展示.

# es是如何做存储排序的?
房源索引里只存储了房源基础数据，排序是根据查询筛选时根据某些字段排序或使用painless脚本计算。
ES房源索引里存储每个房源每天的房态、价格、促销活动数据。房东改房态、改价、参加促销通过MQ同步到ES更新索引数据，另定时有全量房源更新。

# 筛选多天时（每天价格可能一样可能不一样）价格如何展示？
价格展示：筛选日期内的每日价格和促销活动根据产品策略进行判断展示，这里不方便透漏。

# 筛选多天&价格区间过滤实现
先筛选出多天房态满足的房源，然后根据产品策略动态计算每个房源多天的一个最优价格，然后用最优价格过滤是否在价格区间。最优价格计算主要使用到了ES painless脚本，会计算出房源是否可以展示，true或者false。最小价格是通过脚本计算出。最终展示出筛选出的房源。